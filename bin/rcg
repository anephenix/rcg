#!/usr/bin/env node

// NPM Dependencies
const path = require('path');
const program = require('commander');

// File Dependencies
const generateComponent = require('../index');
const packageJson = require('../package.json');

const parseDirectory = directory => {
	return path.resolve(process.cwd(), directory);
};

const mainAction = async () => {
	const componentName = program.args[0];
	const defaultSrcFolderPath = path.join(process.cwd(), 'src', 'components');
	const srcFolderPath = program.directory || defaultSrcFolderPath;
	await generateComponent(componentName, srcFolderPath);
};

program
	.version(packageJson.version)
	.option(
		'-d, --directory <dir>',
		'The directory to put the component in',
		parseDirectory
	)
	.action(mainAction);

// Run the command
program.parse(process.argv);
